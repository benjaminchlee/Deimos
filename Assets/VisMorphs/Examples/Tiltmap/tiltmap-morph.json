{
    "signals": [{
            "name": "rotationX",
            "source": {
                "type": "gameobject",
                "ref": "TiltMapHandle",
                "select": "transform.eulerAngles.x"
            }
        }, {
            "name": "tiltMapTrigger",
            "expression": "0 <= rotationX && rotationX <= 90"
        }, {
            "name": "c2pTween",
            "expression": "normalise(rotationX, 18, 36)"
        }, {
            "name": "p2bTween",
            "expression":"normalise(rotationX, 54, 72)"
        }
    ],

    "states": [
        {
            "name": "choropleth",
            "mark": "geoshape",
            "encoding": {
                "x": {
                    "field": "Longitude",
                    "type": "spatial"
                },
                "y": {
                    "field": "Latitude",
                    "type": "spatial"
                },
                "z": null,
                "width": {
                    "field": "Longitude",
                    "type": "spatial"
                },
                "height": {
                    "field": "Latitude",
                    "type": "spatial"
                }
            }
        },
        {
            "name": "prism",
            "mark": "geoshape",
            "encoding": {
                "x": {
                    "field": "Longitude",
                    "type": "spatial"
                },
                "y": {
                    "field": "Latitude",
                    "type": "spatial"
                },
                "z": {
                    "field": "Population",
                    "type": "quantitative"
                },
                "width": {
                    "field": "Longitude",
                    "type": "spatial"
                },
                "height": {
                    "field": "Latitude",
                    "type": "spatial"
                },
                "depth": {
                    "field": "Population",
                    "type": "quantitative"
                },
                "zoffsetpct": {
                    "value": -0.5
                }
            }
        },
        {
            "name": "bar",
            "mark": "geoshape",
            "encoding": {
                "x": {
                    "field": "Name",
                    "type": "nominal"
                },
                "y": null,
                "z": {
                    "field": "Population",
                    "type": "quantitative"
                },
                "width": {
                    "value": 5
                },
                "depth": {
                    "field": "Population",
                    "type": "quantitative"
                },
                "zoffsetpct": {
                    "value": -0.5
                },
                "height": {
                    "value": 0.01
                }
            }
        }
    ],

    "transitions": [
        {
            "name": "c2p",
            "states": ["choropleth", "prism"],
            "triggers": ["tiltMapTrigger"],
            "timing": {
                "control": "c2pTween",
                "easing": "inoutcubic"
            },
            "interrupt": {
                "control": "reset",
                "value": "start"
            },
            "bidirectional": true
        },
        {
            "name": "p2b",
            "states": ["prism", "bar"],
            "triggers": ["tiltMapTrigger"],
            "timing": {
                "control": "p2bTween",
                "easing": "inoutcubic"
            },
            "interrupt": {
                "control": "reset",
                "value": "start"
            },
            "bidirectional": true
        }
    ]
}